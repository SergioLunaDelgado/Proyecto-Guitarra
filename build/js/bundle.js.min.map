{"version":3,"sources":["fetch.js"],"names":["apiUrl","guitars","document","querySelector","guitar","registros","comprar","form_info","opciones","style","currency","minimumFractionDigits","articulosCarrito","addEventListener","JSON","parse","localStorage","getItem","carritoLleno","carritoVacio","length","classList","remove","add","carritoHTML","obtenerGuitarras","url","window","location","search","params","URLSearchParams","get","href","obtenerGuitarra","textContent","Math","floor","random","e","preventDefault","form_fullname","value","form_email","form_phone","innerHTML","print","clear","async","response","fetch","ok","Error","json","forEach","div","createElement","className","name","descript","price","toLocaleString","appendChild","error","console","model","find","undefined","id","agregarCarrito","amount","parseInt","info","total","some","carrito","guitarra","map","sincronizarStorage","alert","row","eliminarGuitarra","log","carritoFiltrados","filter","setItem","stringify"],"mappings":"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","file":"bundle.js","sourcesContent":["const apiUrl = '/api/guitars.json';\r\nconst guitars = document.querySelector('#guitars');\r\nconst guitar = document.querySelector('#guitar');\r\nconst registros = document.querySelector('#registros');\r\nconst comprar = document.querySelector('#comprar');\r\nconst form_info = document.querySelector('#form_info');\r\nconst opciones = {\r\n    style: \"currency\",\r\n    currency: \"MXN\",\r\n    minimumFractionDigits: 0,\r\n}\r\n\r\nlet articulosCarrito = [];\r\n\r\n/* Muestra los cursos de localStorage */\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    articulosCarrito = JSON.parse(localStorage.getItem('carrito') || []);\r\n    if (registros) {\r\n        const carritoLleno = document.querySelector('#carritoLleno');\r\n        const carritoVacio = document.querySelector('#carritoVacio');\r\n        if (articulosCarrito.length !== 0) {\r\n            carritoLleno.classList.remove('d-none');\r\n            carritoVacio.classList.add('d-none');\r\n            carritoHTML(articulosCarrito);\r\n        }\r\n    }\r\n});\r\n\r\n/* Llama a la función para obtener las guitarras */\r\nif (guitars) {\r\n    obtenerGuitarras();\r\n}\r\n\r\n/* Llama a la función para obtener la guitarra */\r\nif (guitar) {\r\n    const url = window.location.search;\r\n    const params = new URLSearchParams(url);\r\n\r\n    /* Validar que el parametro no sea nulo */\r\n    if (params.get(\"model\") == '') {\r\n        window.location.href = '/'\r\n    }\r\n    obtenerGuitarra(params.get(\"model\"));\r\n}\r\n\r\nif (comprar) {\r\n    /* Generar folio */\r\n    let folio = document.querySelector('#folio').textContent = Math.floor(Math.random() * 9000) + 1000;\r\n\r\n    comprar.addEventListener('submit', e => {\r\n        e.preventDefault();\r\n        const form_fullname = document.querySelector('#form_fullname').value;\r\n        const form_email = document.querySelector('#form_email').value;\r\n        const form_phone = document.querySelector('#form_phone').value;\r\n        form_info.innerHTML = `<b>Nombre:</b> ${form_fullname}<br><b>Correo:</b> ${form_email}<br><b>Celular:</b> ${form_phone}`;\r\n        /* quitar modal */\r\n        const datos = document.querySelector('#datos');\r\n        datos.classList.remove('show');\r\n        /* Ctrl + P */\r\n        window.print();\r\n        localStorage.clear();\r\n        window.location.href = '/guitarras.html'\r\n    });\r\n}\r\n\r\nasync function obtenerGuitarras() {\r\n\r\n    try {\r\n        const response = await fetch(apiUrl);\r\n\r\n        if (!response.ok) {\r\n            throw new Error('Error al consultar API');\r\n        }\r\n\r\n        const data = await response.json();\r\n        data.forEach(e => {\r\n            const div = document.createElement('DIV');\r\n            div.className = 'col-md-6 col-lg-4 my-4 row align-items-center';\r\n            div.innerHTML = `\r\n                <div class=\"col-4\">\r\n                    <picture>\r\n                        <source srcset=\"/build/img/${e.name}.avif\" type=\"image/avif\">\r\n                        <source srcset=\"/build/img/${e.name}.webp\" type=\"image/webp\">\r\n                        <img loading=\"lazy\" src=\"/build/img/${e.name}.jpg\" alt=\"Imagen ${e.name}\" class=\"img-fluid\" width=\"400\" height=\"600\">\r\n                    </picture>\r\n                </div>\r\n                <div class=\"col-8 d-flex h-100 flex-column justify-content-between\">\r\n                    <h3 class=\"text-black fs-4 fw-bold\">${e.name}</h3>\r\n                    <p>${e.descript}</p>\r\n                        <p class=\"fw-black text-primary fs-3\">${e.price.toLocaleString(\"es-MX\", opciones)}</p>\r\n                        <a href=\"guitarra.html?model=${e.name}\" class=\"btn btn-dark d-block py-1 text-uppercase fw-black\">Ver Producto</a>\r\n                </div>\r\n            `;\r\n            guitars.appendChild(div);\r\n        });\r\n    } catch (error) {\r\n        console.error('Error al obtener datos de la API:', error);\r\n    }\r\n}\r\n\r\nasync function obtenerGuitarra(name) {\r\n\r\n    try {\r\n        const response = await fetch(apiUrl);\r\n\r\n        if (!response.ok) {\r\n            throw new Error('Error al consultar API');\r\n        }\r\n\r\n        const data = await response.json();\r\n        const model = data.find(guitar => guitar.name === name);\r\n        /* Validar que coincida la busqueda */\r\n        if (model === undefined) {\r\n            window.location.href = '/'\r\n        }\r\n\r\n        const div = document.createElement('DIV');\r\n        div.className = 'row flex-column flex-md-row';\r\n        div.innerHTML = `\r\n        <div class=\"col-md-4 guitarra-imagen\">\r\n            <picture>\r\n                <source srcset=\"/build/img/${model.name}.avif\" type=\"image/avif\">\r\n                <source srcset=\"/build/img/${model.name}.webp\" type=\"image/webp\">\r\n                <img loading=\"lazy\" src=\"/build/img/${model.name}.jpg\" alt=\"Imagen ${model.name}\" class=\"img-fluid\" width=\"400\" height=\"600\">\r\n            </picture>\r\n        </div>\r\n        <div class=\"col-md-8 d-flex flex-column justify-content-center\">\r\n            <h3 class=\"text-dark\">${model.name}</h3>\r\n            <p>${model.descript}</p>\r\n            <p class=\"text-primary fs-1 fw-black\">${model.price.toLocaleString('es-MX', opciones)}</p>\r\n            <form>\r\n                <label for=\"cantidad\" class=\"form-label\">Cantidad</label>\r\n                <select name=\"cantidad\" id=\"cantidad\" class=\"form-select rounded-pill ps-2 border border-dark border-1\" required>\r\n                    <option value=\"1\">1</option>\r\n                    <option value=\"2\">2</option>\r\n                    <option value=\"3\">3</option>\r\n                    <option value=\"4\">4</option>\r\n                    <option value=\"5\">5</option>\r\n                </select>\r\n                <button type=\"button\" onclick=\"agregarCarrito(${model.id}, '${model.name}', ${model.price})\" class=\"btn btn-primary w-100 py-1 text-white text-uppercase mt-3\">Agregar al Carrito</button>\r\n            </form>\r\n        </div>                \r\n        `;\r\n        guitar.appendChild(div);\r\n    } catch (error) {\r\n        console.error('Error al obtener datos de la API:', error);\r\n    }\r\n}\r\n\r\nfunction agregarCarrito(id, name, price) {\r\n    const amount = parseInt(document.querySelector('select').value);\r\n    /* Crear un objeto con el contenido del carrito */\r\n    const info = { id, name, price, amount, total: amount * price }\r\n\r\n    /* Revisa si un elemento ya existe en el carrito */\r\n    const existe = articulosCarrito.some(carrito => carrito.id === info.id);\r\n    if (existe) {\r\n        /* Actualizamos la cantidad */\r\n        const guitarra = articulosCarrito.map(carrito => {\r\n            if (carrito.id === info.id) {\r\n                carrito.amount = carrito.amount + amount;\r\n                carrito.total = carrito.total + info.total;\r\n                return carrito; /* objeto actualizado */\r\n            } else {\r\n                return carrito; /* objeto que no estan duplicados */\r\n            }\r\n        });\r\n        articulosCarrito = [...guitarra];\r\n    } else {\r\n        /* Agregar elementos al arreglo de carrito */\r\n        articulosCarrito = [...articulosCarrito, info];\r\n    }\r\n\r\n    sincronizarStorage();\r\n    alert(`La guitarra ${name} se agrega al carrito exitosamente`);\r\n    window.location.href = '/carrito.html'\r\n}\r\n\r\nfunction carritoHTML(carrito) {\r\n    /* Recorrer el carrito y genera el HTML */\r\n    carrito.forEach(info => {\r\n        const { name, price, amount, total, id } = info;\r\n        const row = document.createElement('tr');\r\n        row.innerHTML = `\r\n            <td class=\"min-w-10\">\r\n                <picture>\r\n                    <source srcset=\"/build/img/${name}.avif\" type=\"image/avif\">\r\n                    <source srcset=\"/build/img/${name}.webp\" type=\"image/webp\">\r\n                    <img loading=\"lazy\" src=\"/build/img/${name}.jpg\" alt=\"Imagen ${name}\" class=\"img-fluid\" width=\"64\" height=\"128\">\r\n                </picture>\r\n            </td>\r\n            <td> \r\n                ${name}\r\n            </td>\r\n            <td>\r\n                ${parseInt(price).toLocaleString('es-MX', opciones)}\r\n            </td>\r\n            <td>\r\n                ${amount}\r\n            </td>\r\n            <td>\r\n                ${total}\r\n            </td>\r\n            <td>\r\n                <button type=\"button\" class=\"borrar-info imprimir-ocultar\" onclick=\"eliminarGuitarra(${id}, '${name}')\">\r\n                    <img src=\"/build/img/x.svg\" alt=\"Borrar\" class=\"img-fluid\" width=\"32\" height=\"32\">\r\n                </button>\r\n            </td>\r\n        `;\r\n        /* Agregar el html en el tbody */\r\n        registros.appendChild(row);\r\n    });\r\n}\r\n\r\nfunction eliminarGuitarra(id, name) {\r\n    const carrito = articulosCarrito.map(info => {\r\n        if (info.id === id) {\r\n            if (info.amount !== 0) {\r\n                info.amount--;\r\n            }\r\n        }\r\n        return info;\r\n    });\r\n    console.log(carrito);\r\n\r\n    const carritoFiltrados = carrito.filter(info => info.amount !== 0);\r\n    articulosCarrito = [...carritoFiltrados];\r\n\r\n    sincronizarStorage();\r\n    alert(`La guitarra ${name} se ha borrado exitosamente`);\r\n    window.location.href = '/carrito.html'\r\n}\r\n\r\nfunction sincronizarStorage() {\r\n    localStorage.setItem('carrito', JSON.stringify(articulosCarrito));\r\n}\r\n\r\n"]}