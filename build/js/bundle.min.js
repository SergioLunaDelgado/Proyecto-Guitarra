const apiUrl="/api/guitars.json",guitars=document.querySelector("#guitars"),guitar=document.querySelector("#guitar"),registros=document.querySelector("#registros"),comprar=document.querySelector("#comprar"),form_info=document.querySelector("#form_info"),opciones={style:"currency",currency:"MXN",minimumFractionDigits:0};let articulosCarrito=[];if(document.addEventListener("DOMContentLoaded",()=>{if(articulosCarrito=JSON.parse(localStorage.getItem("carrito")||[]),registros){const t=document.querySelector("#carritoLleno"),r=document.querySelector("#carritoVacio");0!==articulosCarrito.length&&(t.classList.remove("d-none"),r.classList.add("d-none"),carritoHTML(articulosCarrito))}}),guitars&&obtenerGuitarras(),guitar){const t=window.location.search,r=new URLSearchParams(t);""==r.get("model")&&(window.location.href="/"),obtenerGuitarra(r.get("model"))}if(comprar){document.querySelector("#folio").textContent=Math.floor(9e3*Math.random())+1e3;comprar.addEventListener("submit",t=>{t.preventDefault();const r=document.querySelector("#form_fullname").value,e=document.querySelector("#form_email").value,o=document.querySelector("#form_phone").value;form_info.innerHTML=`<b>Nombre:</b> ${r}<br><b>Correo:</b> ${e}<br><b>Celular:</b> ${o}`;document.querySelector("#datos").classList.remove("show"),window.print(),localStorage.clear(),window.location.href="/guitarras.html"})}async function obtenerGuitarras(){try{const t=await fetch(apiUrl);if(!t.ok)throw new Error("Error al consultar API");(await t.json()).forEach(t=>{const r=document.createElement("DIV");r.className="col-md-6 col-lg-4 my-4 row align-items-center",r.innerHTML=`\n                <div class="col-4">\n                    <picture>\n                        <source srcset="/build/img/${t.name}.avif" type="image/avif">\n                        <source srcset="/build/img/${t.name}.webp" type="image/webp">\n                        <img loading="lazy" src="/build/img/${t.name}.jpg" alt="Imagen ${t.name}" class="img-fluid" width="400" height="600">\n                    </picture>\n                </div>\n                <div class="col-8 d-flex h-100 flex-column justify-content-between">\n                    <h3 class="text-black fs-4 fw-bold">${t.name}</h3>\n                    <p>${t.descript}</p>\n                        <p class="fw-black text-primary fs-3">${t.price.toLocaleString("es-MX",opciones)}</p>\n                        <a href="guitarra.html?model=${t.name}" class="btn btn-dark d-block py-1 text-uppercase fw-black">Ver Producto</a>\n                </div>\n            `,guitars.appendChild(r)})}catch(t){console.error("Error al obtener datos de la API:",t)}}async function obtenerGuitarra(t){try{const r=await fetch(apiUrl);if(!r.ok)throw new Error("Error al consultar API");const e=(await r.json()).find(r=>r.name===t);void 0===e&&(window.location.href="/");const o=document.createElement("DIV");o.className="row flex-column flex-md-row",o.innerHTML=`\n        <div class="col-md-4 guitarra-imagen">\n            <picture>\n                <source srcset="/build/img/${e.name}.avif" type="image/avif">\n                <source srcset="/build/img/${e.name}.webp" type="image/webp">\n                <img loading="lazy" src="/build/img/${e.name}.jpg" alt="Imagen ${e.name}" class="img-fluid" width="400" height="600">\n            </picture>\n        </div>\n        <div class="col-md-8 d-flex flex-column justify-content-center">\n            <h3 class="text-dark">${e.name}</h3>\n            <p>${e.descript}</p>\n            <p class="text-primary fs-1 fw-black">${e.price.toLocaleString("es-MX",opciones)}</p>\n            <form>\n                <label for="cantidad" class="form-label">Cantidad</label>\n                <select name="cantidad" id="cantidad" class="form-select rounded-pill ps-2 border border-dark border-1" required>\n                    <option value="1">1</option>\n                    <option value="2">2</option>\n                    <option value="3">3</option>\n                    <option value="4">4</option>\n                    <option value="5">5</option>\n                </select>\n                <button type="button" onclick="agregarCarrito(${e.id}, '${e.name}', ${e.price})" class="btn btn-primary w-100 py-1 text-white text-uppercase mt-3">Agregar al Carrito</button>\n            </form>\n        </div>                \n        `,guitar.appendChild(o)}catch(t){console.error("Error al obtener datos de la API:",t)}}function agregarCarrito(t,r,e){const o=parseInt(document.querySelector("select").value),a={id:t,name:r,price:e,amount:o,total:o*e};if(articulosCarrito.some(t=>t.id===a.id)){const t=articulosCarrito.map(t=>t.id===a.id?(t.amount=t.amount+o,t.total=t.total+a.total,t):t);articulosCarrito=[...t]}else articulosCarrito=[...articulosCarrito,a];sincronizarStorage(),alert(`La guitarra ${r} se agrega al carrito exitosamente`),window.location.href="/carrito.html"}function carritoHTML(t){t.forEach(t=>{const{name:r,price:e,amount:o,total:a,id:n}=t,i=document.createElement("tr");i.innerHTML=`\n            <td class="min-w-10">\n                <picture>\n                    <source srcset="/build/img/${r}.avif" type="image/avif">\n                    <source srcset="/build/img/${r}.webp" type="image/webp">\n                    <img loading="lazy" src="/build/img/${r}.jpg" alt="Imagen ${r}" class="img-fluid" width="64" height="128">\n                </picture>\n            </td>\n            <td> \n                ${r}\n            </td>\n            <td>\n                ${parseInt(e).toLocaleString("es-MX",opciones)}\n            </td>\n            <td>\n                ${o}\n            </td>\n            <td>\n                ${a}\n            </td>\n            <td>\n                <button type="button" class="borrar-info imprimir-ocultar" onclick="eliminarGuitarra(${n}, '${r}')">\n                    <img src="/build/img/x.svg" alt="Borrar" class="img-fluid" width="32" height="32">\n                </button>\n            </td>\n        `,registros.appendChild(i)})}function eliminarGuitarra(t,r){const e=articulosCarrito.map(r=>(r.id===t&&0!==r.amount&&r.amount--,r));console.log(e);const o=e.filter(t=>0!==t.amount);articulosCarrito=[...o],sincronizarStorage(),alert(`La guitarra ${r} se ha borrado exitosamente`),window.location.href="/carrito.html"}function sincronizarStorage(){localStorage.setItem("carrito",JSON.stringify(articulosCarrito))}
//# sourceMappingURL=bundle.js.map
